{% extends "base.html" %}
{% load static %}

{% block content %}
  <div class="container mt-5">
    <h1 class="h3 text-center">Bienvenido a Global Exchange</h1>
    <p class="text-center">Usa el menú superior para navegar.</p>

    <div class="text-center">
      <img src="{% static 'images/Lobo_moto.jpg' %}" alt="Global Exchange" class="img-fluid mt-4" style="max-width: 700px;">
      <p class="mt-3">Si la velocidad me quita la vida, no lloren <br>Iba sonriendo.</p>
    </div>

    <hr class="my-5">

    <h2 class="h4 mb-4">Simulador de Divisas</h2>

    <form id="simulador-form">
      <div class="mb-3">
        <label for="tipoOperacion" class="form-label">Tipo de operación</label>
        <select class="form-select" id="tipoOperacion" onchange="actualizarMonedas()">
          <option value="compra">Compra</option>
          <option value="venta">Venta</option>
        </select>
      </div>

      <div class="mb-3">
        <label for="moneda" class="form-label">Seleccionar divisa</label>
        <select class="form-select" id="moneda">
          <option value="USD">Dólar (USD)</option>
          <option value="EUR">Euro (EUR)</option>
          <option value="BRL">Real (BRL)</option>
        </select>
      </div>

      <div class="mb-3">
        <label for="monto" class="form-label">Monto</label>
        <input type="number" class="form-control" id="monto" placeholder="Ingrese el monto">
      </div>

      <div class="mb-3">
        <label for="resultado" class="form-label">Resultado en Guaraníes</label>
        <input type="text" class="form-control" id="resultado" readonly>
      </div>

      <button type="button" class="btn btn-primary" onclick="simular()">Simular</button>
    </form>
  </div>

  <script>
    const tasas = {
      USD: 7500,
      EUR: 8500,
      BRL: 1300
    };

    function actualizarMonedas() {
      const tipo = document.getElementById("tipoOperacion").value;
      const label = document.querySelector("label[for='moneda']");
      label.textContent = tipo === "compra" ? "Divisa a comprar" : "Divisa a vender";
    }

    function simular() {
      const tipo = document.getElementById("tipoOperacion").value;
      const moneda = document.getElementById("moneda").value;
      const monto = parseFloat(document.getElementById("monto").value);
      const tasa = tasas[moneda];

      if (isNaN(monto)) {
        alert("Por favor, ingrese un monto válido.");
        return;
      }

      let resultado = tipo === "compra" ? monto * tasa : monto * tasa;
      document.getElementById("resultado").value = resultado.toLocaleString("es-PY") + " ₲";
    }
  </script>
{% endblock %}

