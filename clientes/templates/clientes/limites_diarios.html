{% extends "base.html" %}
{% load humanize %}

{% block content %}
<div class="container mt-4">
  <h2>Historial de Límites Diarios</h2>

  <div class="d-flex gap-2 mb-3">
    <a href="{% url 'clientes:lista_clientes' %}" class="btn btn-secondary">
       Volver
    </a>
    <a href="{% url 'clientes:crear_limite_diario' %}" class="btn btn-primary">
      Nuevo Límite Diario
    </a>
  </div>

  <table class="table table-bordered">
    <thead class="table-dark">
      <tr>
        <th>Fecha</th>
        <th>Monto (Gs.)</th>
        <th>Inicio Vigencia</th>
        <th>Acciones</th> </tr>
    </thead>
    <tbody>
      {% for l in limites %}
      <tr>
        <td>{{ l.fecha }}</td>
        <td>{{ l.monto|intcomma }}</td>
        <td>{{ l.inicio_vigencia|date:"d/m/Y H:i" }}</td>
        <td>
            <a href="{% url 'clientes:editar_limite_diario' l.pk %}" class="btn btn-sm btn-warning">
                <i class="fas fa-edit"></i> Editar
            </a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="4">No hay límites definidos.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}