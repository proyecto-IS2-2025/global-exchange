{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="card shadow-lg border-0 rounded-4">
        <div class="card-header bg-primary text-white py-3 rounded-top-4">
          <div class="d-flex align-items-center">
            <i class="bi bi-currency-exchange display-6 me-3"></i>
            <div>
              <h3 class="card-title mb-0">Vender divisa</h3>
              <p class="mb-0 opacity-75">Conversión a Guaraníes</p>
            </div>
          </div>
        </div>
        
        <div class="card-body p-4">
          <div class="alert alert-info border-0 bg-light-info">
            <i class="bi bi-info-circle me-2"></i>
            Seleccioná la divisa y el monto. El sistema calculará automáticamente cuánto recibirás en <strong>Guaraníes</strong>.
          </div>

          <form method="post" novalidate class="mt-4">
            {% csrf_token %}
            
            <div class="row g-4">
              <!-- Campos del formulario con mejor presentación -->
              {% for field in form %}
              <div class="col-md-6">
                <div class="form-floating">
                  {{ field }}
                  <label for="{{ field.id_for_label }}">{{ field.label }}</label>
                  {% if field.help_text %}
                  <div class="form-text">{{ field.help_text }}</div>
                  {% endif %}
                  {% for error in field.errors %}
                  <div class="invalid-feedback d-block">{{ error }}</div>
                  {% endfor %}
                </div>
              </div>
              {% endfor %}
            </div>

            <!-- Resultado de la conversión (si está disponible) -->
            <div id="resultado-conversion" class="alert alert-success mt-4 d-none">
              <div class="d-flex align-items-center">
                <i class="bi bi-check-circle-fill me-2"></i>
                <span id="texto-conversion"></span>
              </div>
            </div>

            <div class="d-flex justify-content-between mt-5 pt-2">
              <button class="btn btn-success px-4 py-2 rounded-3 fw-bold" type="submit">
                <i class="bi bi-calculator me-2"></i> Calcular conversión
              </button>
              <a href="{% url 'inicio' %}" class="btn btn-outline-secondary px-4 py-2 rounded-3">
                <i class="bi bi-x-circle me-2"></i> Cancelar
              </a>
            </div>
          </form>
        </div>
        
        <div class="card-footer bg-light py-3 rounded-bottom-4">
          <div class="text-center text-muted small">
            <i class="bi bi-clock-history me-1"></i>
            Tasas actualizadas al {% now "j F Y" %}
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .form-control {
    border-radius: 0.5rem;
    padding: 1rem;
    height: calc(3.5rem + 2px);
  }
  .form-control:focus {
    box-shadow: 0 0 0 0.25rem rgba(13, 110, 253, 0.15);
    border-color: #86b7fe;
  }
  .form-floating {
    position: relative;
  }
  .form-floating > label {
    left: 12px;
    color: #6c757d;
  }
  .card {
    overflow: hidden;
  }
  .btn {
    transition: all 0.2s ease;
  }
  .btn-success {
    background: linear-gradient(to right, #198754, #0f6848);
    border: none;
  }
  .btn-success:hover {
    background: linear-gradient(to right, #0f6848, #094c34);
    transform: translateY(-2px);
  }
</style>

<!-- Script para mejorar la interactividad -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Mejorar los campos del formulario con clases de Bootstrap
    const inputs = document.querySelectorAll('input, select');
    inputs.forEach(input => {
      input.classList.add('form-control');
    });
    
    // Agregar placeholders si es necesario
    const amountField = document.querySelector('input[type="number"]');
    if (amountField && !amountField.placeholder) {
      amountField.placeholder = "Ingresá el monto";
    }
  });
</script>
{% endblock %}